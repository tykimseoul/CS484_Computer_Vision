%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% CS484 Written Question Template
%
% Acknowledgements:
% The original code is written by Prof. James Tompkin (james_tompkin@brown.edu).
% The second version is revised by Prof. Min H. Kim (minhkim@kaist.ac.kr).
%
% This is a LaTeX document. LaTeX is a markup language for producing 
% documents. Your task is to fill out this document, then to compile 
% it into a PDF document. 
%
% 
% TO COMPILE:
% > pdflatex thisfile.tex
%
% If you do not have LaTeX and need a LaTeX distribution:
% - Personal laptops (all common OS): www.latex-project.org/get/
% - We recommend latex compiler miktex (https://miktex.org/) for windows,
%   macTex (http://www.tug.org/mactex/) for macOS users.
%   And TeXstudio(http://www.texstudio.org/) for latex editor.
%   You should install both compiler and editor for editing latex.
%   The another option is Overleaf (https://www.overleaf.com/) which is 
%   an online latex editor.
%
% If you need help with LaTeX, please come to office hours. 
% Or, there is plenty of help online:
% https://en.wikibooks.org/wiki/LaTeX
%
% Good luck!
% Min and the CS484 staff
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% How to include two graphics on the same line:
% 
% \includegraphics[width=0.49\linewidth]{yourgraphic1.png}
% \includegraphics[width=0.49\linewidth]{yourgraphic2.png}
%
% How to include equations:
%
% \begin{equation}
% y = mx+c
% \end{equation}
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[11pt]{article}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[colorlinks = true,
            linkcolor = blue,
            urlcolor  = blue]{hyperref}
\usepackage[a4paper,margin=1.5in]{geometry}
\usepackage{stackengine,graphicx}
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\usepackage{microtype}
\usepackage{times}
\usepackage{booktabs}

% From https://ctan.org/pkg/matlab-prettifier
\usepackage[numbered,framed]{matlab-prettifier}

\frenchspacing
\setlength{\parindent}{0cm} % Default is 15pt.
\setlength{\parskip}{0.3cm plus1mm minus1mm}

\pagestyle{fancy}
\fancyhf{}
\lhead{Homework Writeup}
\rhead{CS 484}
\rfoot{\thepage}

\date{}

\title{\vspace{-1cm}Homework 2 Writeup}


\begin{document}
\maketitle
\vspace{-3cm}
\thispagestyle{fancy}

\section*{Instructions}
\begin{itemize}
  \item Describe any interesting decisions you made to write your algorithm.
  \item Show and discuss the results of your algorithm.
  \item Feel free to include code snippets, images, and equations.
  \item Use as many pages as you need, but err on the short side If you feel you only need to write a short amount to meet the brief, th
  
  \item \textbf{Please make this document anonymous.}
\end{itemize}

\section*{Algorithm Implementation}

In the filtering of an image using convolution, a filter called the kernel is applied to each pixel of the image. The given my\_imfilter takes the image and the filter as parameters and returns the ouput. 
After studying the convolution filtering algorithm, I learned that the filter should be flipped both horizontally and vertically before applying. The flipping of the kernel is done in line 1 of the code below. 
When applying the kernel on elements at the edge, there should be padding around it so that the size of the kernel and the size of the element and its neighbor match. The width of the padding is half the size of the kernel at respective dimensions. The calculation of the padding size and padding the image is done in lines 2 and 3. 
After applying filter to the padded image, the resulting matrix is the same size as the padded image. Thus, a zero matrix of the same size as padded image is created in line 4.
The given image is in RGB space, so the for loop is iterated through the third dimension of the image matrix in line 5.
Only the pixels that are not paddings are iterated in the double for loop in lines 6 and 7. 
The target area centered at the pixel (i,j) is accessed in line 8.
The corresponding element in the resulting filtered image is updated by the sum of elements of the element-wise multiplication between the target matrix and the kernel. This is the main idea of convolution filtering and shown in line 9.
After the triple for loops, the filtered image should be cropped back to match the original image size. The crop is done in line 13.

\begin{lstlisting}[style=Matlab-editor]
flipped_kernel = flip(flip(filter, 1), 2);
pad_size = floor(size(filter)/2);
padded_image = padarray(image, [pad_size, 0]);
filtered_image = zeros(size(padded_image));
for d=1:size(padded_image, 3)
    for i=pad_size(1)+1:size(image, 1)+pad_size(1)
        for j=pad_size(2)+1:size(image, 2)+pad_size(2)
            target = padded_image(i-pad_size(1):i+pad_size(1), j-pad_size(2):j+pad_size(2), d);
            filtered_image(i, j, d) = sum(sum(target.*flipped_kernel));
        end
    end
end
output=filtered_image(pad_size(1)+1:size(image,1)+pad_size(1), pad_size(2)+1:size(image,2)+pad_size(2), :);

\end{lstlisting}

\section*{Attempts}

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

My code snippet highlights an interesting point.
\begin{lstlisting}[style=Matlab-editor]
one = 1;
two = one + one;
if two == 2
    disp( 'This computer is not broken.' );
end
\end{lstlisting}

\section*{A Result}

\begin{enumerate}
    \item Result 1 was a total failure, because...
    \item Result 2 (Figure~\ref{fig:result1}, left) was surprising, because...
    \item Result 3 (Figure~\ref{fig:result1}, right) blew my socks off, because...
\end{enumerate}

\begin{figure}[h]
    \centering
    \includegraphics[width=5cm]{placeholder.jpg}
    \includegraphics[width=5cm]{placeholder.jpg}
    \caption{\emph{Left:} My result was spectacular. \emph{Right:} Curious.}
    \label{fig:result1}
\end{figure}

My results are summarized in Table~\ref{tab:table1}.

\begin{table}[h]
    \centering
    \begin{tabular}{lr}
        \toprule
        Condition & Time (seconds) \\
        \midrule
        Test 1 & 1 \\
        Test 2 & 1000 \\
        \bottomrule
    \end{tabular}
    \caption{Stunning revelation about the efficiency of my code.}
    \label{tab:table1}
\end{table}

\end{document}
