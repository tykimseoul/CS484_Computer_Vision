%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% CS484 Written Question Template
%
% Acknowledgements:
% The original code is written by Prof. James Tompkin (james_tompkin@brown.edu).
% The second version is revised by Prof. Min H. Kim (minhkim@kaist.ac.kr).
%
% This is a LaTeX document. LaTeX is a markup language for producing 
% documents. Your task is to fill out this document, then to compile 
% it into a PDF document. 
%
% 
% TO COMPILE:
% > pdflatex thisfile.tex
%
% If you do not have LaTeX and need a LaTeX distribution:
% - Personal laptops (all common OS): www.latex-project.org/get/
% - We recommend latex compiler miktex (https://miktex.org/) for windows,
%   macTex (http://www.tug.org/mactex/) for macOS users.
%   And TeXstudio(http://www.texstudio.org/) for latex editor.
%   You should install both compiler and editor for editing latex.
%   The another option is Overleaf (https://www.overleaf.com/) which is 
%   an online latex editor.
%
% If you need help with LaTeX, please come to office hours. 
% Or, there is plenty of help online:
% https://en.wikibooks.org/wiki/LaTeX
%
% Good luck!
% Min and the CS484 staff
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% How to include two graphics on the same line:
% 
% \includegraphics[width=0.49\linewidth]{yourgraphic1.png}
% \includegraphics[width=0.49\linewidth]{yourgraphic2.png}
%
% How to include equations:
%
% \begin{equation}
% y = mx+c
% \end{equation}
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[11pt]{article}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[colorlinks = true,
linkcolor = blue,
urlcolor  = blue]{hyperref}
\usepackage[a4paper,margin=1.5in]{geometry}
\usepackage{stackengine,graphicx}
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\usepackage{microtype}
\usepackage{times}

% From https://ctan.org/pkg/matlab-prettifier
\usepackage[numbered,framed]{matlab-prettifier}

\frenchspacing
\setlength{\parindent}{0cm} % Default is 15pt.
\setlength{\parskip}{0.3cm plus1mm minus1mm}

\pagestyle{fancy}
\fancyhf{}
\lhead{Homework 2 Questions}
\rhead{CS484}
\rfoot{\thepage}

\date{}

\title{\vspace{-1cm}Homework 2 Questions}


\begin{document}
	\maketitle
	\vspace{-3cm}
	\thispagestyle{fancy}
	
	\section*{Instructions}
	\begin{itemize}
		\item 4 questions.
		\item Write code where appropriate.
		\item Feel free to include images or equations.
		\item Please make this document anonymous.
		\item \textbf{Please use only the space provided and keep the page breaks.} Please do not make new pages, nor remove pages. The document is a template to help grading.
		\item If you really need extra space, please use new pages at the end of the document and refer us to it in your answers.
	\end{itemize}

	\section*{Questions}
	
	\paragraph{Q1:} Explicitly describe image convolution: the input, the transformation, and the output. Why is it useful for computer vision?
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\paragraph{A1:} Convolution is the process of adding the elements of an image to its neighbors by the weights defined in a small matrix called the kernel. The symbol used for convolution is the matrix multiplication operator "*", however, it is different from traditional matrix multiplication. The input of image convolution is the image itself and the kernel. The transformation is performed by the kernel by calculating the weighted sum of elements. The output is the transformed image whose elements are the sums calculated with the kernel. Image convolution is useful in computer vision because filters such as edge detection and blur filter can easily be applied to an image using convolution. 
	
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	% Please leave the pagebreak
	\pagebreak
	\paragraph{Q2:} What is the difference between convolution and correlation? Construct a scenario which produces a different output between both operations.
	
	\emph{Please use \href{https://www.mathworks.com/help/images/ref/imfilter.html}{$imfilter$} to experiment! Look at the `options' parameter in MATLAB Help to learn how to switch the underlying operation from correlation to convolution.}
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\paragraph{A2:} Convolution is the measure of effect of one signal to the other, while correlation is the measure of similarity between two signals. Below is the code (\emph{compare\_imfilter.m}) that I used to compare the images generated by different options of imfilter using a Sobel filter. Also, the resulting images are shown in Figure~\ref{fig:result1}. The direction of the colored pixels are different so it seems as if the direction of lighting is different.
	
	\begin{lstlisting}[style=Matlab-editor]
test_image = im2single(imread('../data/cat.bmp'));
filter = [-1 0 1; -2 0 2; -1 0 1];

convolution = imfilter(test_image, filter, 'conv');
correlation = imfilter(test_image, filter, 'corr');

imshow(convolution);
figure();
imshow(correlation);
	\end{lstlisting}
	\begin{figure}[h!]
		\centering
		\includegraphics[width=6cm]{../code/cat_conv.png}
		\includegraphics[width=6cm]{../code/cat_corr.png}
		\caption{\emph{Left:} Convolution option. \emph{Right:} Correlation option.}
		\label{fig:result1}
	\end{figure}
	
	
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	% Please leave the pagebreak
	\pagebreak
	\paragraph{Q3:} What is the difference between a high pass filter and a low pass filter in how they are constructed, and what they do to the image? Please provide example kernels and output images.
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\paragraph{A3:} A high pass filter retains the high frequency information while reducing the low frequency information, and vice versa for a low pass filter. A low pass filter blurs the image by reducing the disparity between pixel values. A high pass filter sharpens the image by increasing the brightness of the center pixel relative to neighboring ones. A low pass filter can by created by dividing a matrix of ones by its size. A high pass filter can be created from a matrix that contains negative values with a positive only at the center. Examples of low pass and high pass filters shown in the code below (\emph{low\_high\_pass.m}).
	
		\begin{lstlisting}[style=Matlab-editor]
low_pass = [1 1 1; 1 1 1; 1 1 1]/9;
high_pass = [1 1 1; 1 1 1; 1 1 1]/-9;
high_pass(2,2)=8/9;

test_image = im2single(imread('../data/cat.bmp'));
low = imfilter(test_image, low_pass, 'conv');
high = imfilter(test_image, high_pass, 'conv');

imshow(low);
figure();
imshow(high+0.5);
	\end{lstlisting}
	\begin{figure}[h!]
		\centering
		\includegraphics[width=6cm]{../code/cat_low.png}
		\includegraphics[width=6cm]{../code/cat_high.png}
		\caption{\emph{Left:} Low pass filtered \emph{Right:} High pass filtered.}
		\label{fig:result2}
	\end{figure}
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	% Please leave the pagebreak
	\pagebreak
	\paragraph{Q4:} How does computation time vary with filter sizes from $3\times3$ to $15\times15$ (for all odd and square sizes), and with image sizes from 0.25~MPix to 8~MPix (choose your own intervals)? Measure both using \href{https://www.mathworks.com/help/images/ref/imfilter.html}{$imfilter$} to produce a matrix of values. Use the \href{https://www.mathworks.com/help/images/ref/imresize.html}{$imresize$} function to vary the size of an image. Use an appropriate charting function to plot your matrix of results, such as \href{https://www.mathworks.com/help/matlab/ref/scatter3.html}{$scatter3$} or \href{https://www.mathworks.com/help/matlab/ref/surf.html}{$surf$}.
	
	Do the results match your expectation given the number of multiply and add operations in convolution?
	
	See RISDance.jpg in the attached file.
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\paragraph{A4:} The code used to measure computation times (\emph{computation\_time.m}) is shown below along with the result plot in Figure~\ref{fig:result3}. The results match my expectations because the elapsed time is proportional to the image size and filter size. The number of operations is directly proportional to them.
	\begin{lstlisting}[style=Matlab-editor]
% ... initializations ...
i_idx=1;
for i=filter_sizes
    j_idx=1;
    filter=ones(i)/i^2;
    for j=image_sizes
        scaled=imresize(image, j);
        tic;
        filtered=imfilter(scaled, filter, 'conv');
        t=toc;
        result(i_idx, j_idx) = t;
        j_idx=j_idx+1;
    end
    i_idx=i_idx+1;
end
surf(filter_sizes, image_sizes, result)
	\end{lstlisting}
	\begin{figure}[h!]
		\centering
		\includegraphics[width=7cm]{../code/computation.png}
		\caption{Computation time measurements.}
		\label{fig:result3}
	\end{figure}
	
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	
	% If you really need extra space, uncomment here and use extra pages after the last question.
	% Please refer here in your original answer. Thanks!
	%\pagebreak
	%\paragraph{AX.X Continued:} Your answer continued here.
	
	
	
\end{document}